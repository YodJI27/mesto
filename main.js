(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.item,o=e.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=r.name,this._link=r.link,this._template=n,this._handleCardClick=o}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".cards__item").cloneNode(!0)}},{key:"generateCard",value:function(){this._element=this._getTemplate(),this._setEventListener(),this._element.querySelector(".cards__text").textContent=this._name;var e=this._element.querySelector(".cards__image");return e.src=this._link,e.alt=this._name,this._element}},{key:"_clickLike",value:function(){this._element.querySelector(".cards__like").classList.toggle("cards__like_active")}},{key:"_deleteCards",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListener",value:function(){var e=this;this._element.querySelector(".cards__like").addEventListener("click",(function(){e._clickLike()})),this._element.querySelector(".cards__delete").addEventListener("click",(function(){e._deleteCards()})),this._element.querySelector(".cards__image").addEventListener("click",(function(){e._handleCardClick()}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=document.querySelector(t),this._popupText=n.popupText,this._popupButton=n.popupButton,this._popupTextNameError=n.popupTextNameError,this._popupButonActive=n.popupButonActive}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t){var n=this._formSelector.querySelector("#".concat(e.id,"-error"));e.classList.add(this._popupTextNameError),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._formSelector.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._popupTextNameError),t.textContent=""}},{key:"removeError",value:function(e,t){t.textContent="",e.classList.remove(this._popupTextNameError)}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasNotValidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasNotValidInput(e)?this.buttonActive(t):this.buttonFalse(t)}},{key:"buttonActive",value:function(e){e.classList.add(this._popupButonActive),e.setAttribute("disabled",!0)}},{key:"buttonFalse",value:function(e){e.classList.remove(this._popupButonActive),e.removeAttribute("disabled")}},{key:"_setEventListener",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this._popupText)),r=e.querySelector(this._popupButton);n.forEach((function(e){e.addEventListener("input",(function(){t._isValid(e),t._toggleButtonState(n,r)}))})),this._toggleButtonState(n,r)}},{key:"enableValidation",value:function(){var e=document.querySelector(this._popupButton);this._formSelector.addEventListener("submit",(function(e){e.preventDefault()})),this.buttonFalse(e),this._setEventListener(this._formSelector)}}])&&n(t.prototype,r),e}(),o=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}];function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}o.reverse();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._formSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._formSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._formSelector.querySelector(".popup__close").addEventListener("click",(function(){e.close}))}}])&&c(t.prototype,n),e}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e);var t,n,r,o,c=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=c.call(this,e))._renderer=t,n._form=n._formSelector.querySelector(".popup__container"),n._formElement=n._formSelector.querySelectorAll(".popup__text"),n.setEventListeners(),n}return t=i,(n=[{key:"_getInputValues",value:function(){var e=this;return this._case={},this._formElement.forEach((function(t){e._case[t.name]=t.value})),this._case}},{key:"close",value:function(){this._form.reset(),l(f(i.prototype),"close",this).call(this)}},{key:"setEventListeners",value:function(){var e=this;this._formSelector.addEventListener("submit",(function(){e._renderer(e._getInputValues()),e.close()})),l(f(i.prototype),"setEventListeners",this).call(this)}}])&&a(t.prototype,n),i}(i),d={formSelector:".popup__container",formSelectorCards:".popup__container_cards_item",popupText:".popup__text",popupButton:".popup__button",popupTextNameError:"popup__text_name_error",popupButonActive:"popup__button_active_not"},y=document.querySelector(".popup"),m=document.querySelector(".profile__edit_open_popup"),h=document.querySelector(".profile__add"),v=document.querySelector(".popup__text_name_input"),b=document.querySelector(".popup__text_job_input"),S=(document.querySelector(".profile__author"),document.querySelector(".profile__description"),document.querySelector(".popup__container")),k=document.querySelector(".photo"),g=document.querySelector(".photo__image"),E=document.querySelector(".photo__text"),w=document.querySelector(".popup_cards"),L=document.querySelector(".popup__text_name_cards"),j=document.querySelector(".popup__text_job_cards"),x=document.querySelector(".popup__button_save_form"),q=document.querySelector(".popup__button_form_save"),C=document.getElementById("name-input-error"),O=document.getElementById("job-input-error"),P=document.getElementById("input-name-error"),T=document.getElementById("url-input-error");function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(i,e);var t,n,r,o,c=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),c.call(this,e)}return t=i,(n=[{key:"open",value:function(e,t){g.src=t,g.alt=e,E.textContent=e,B(V(i.prototype),"setEventListeners",this).call(this),B(V(i.prototype),"open",this).call(this)}}])&&R(t.prototype,n),i}(i);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._formSelector=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderElement",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._formSelector.prepend(e)}}])&&U(t.prototype,n),e}();function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=new(function(){function e(t){var n=t.nameSelector,r=t.jobSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameSelector=document.querySelector(n),this._jobSelector=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameSelector.textContent,job:this._jobSelector.textContent}}},{key:"setUserInfo",value:function(e,t){this._nameSelector.textContent=e,this._jobSelector.textContent=t}}])&&z(t.prototype,n),e}())({nameSelector:".profile__author",jobSelector:".profile__description"}),G=new i(".popup"),H=function(e){e.preventDefault(),M.setUserInfo(v.value,b.value),G.close()};y.addEventListener("click",(function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&(S.removeEventListener("submit",H),X.removeError(v,O),X.removeError(b,C),G.close())})),w.addEventListener("click",(function(e){(e.target.classList.contains("popup_cards")||e.target.classList.contains("popup__close_cards_item"))&&(Y.removeError(L,P),Y.removeError(j,T),K.close())})),k.addEventListener("click",(function(e){(e.target.classList.contains("photo")||e.target.classList.contains("photo__close"))&&Q.close()}));var J=function(e){var n=new t({item:e,handleCardClick:function(){Q.open(e.name,e.link)}},"#cards__template").generateCard();W.addItem(n)},K=new _("#cards__popup",(function(e){J(e)})),Q=new D(".photo"),W=new F({items:o,renderer:J},".cards");W.renderElement(o),h.addEventListener("click",(function(){Y.buttonActive(x),K.open()})),m.addEventListener("click",(function(){v.value=M.getUserInfo().name,b.value=M.getUserInfo().job,G.open(),X.buttonFalse(q),S.addEventListener("submit",H)}));var X=new r(d.formSelector,d);X.enableValidation();var Y=new r(d.formSelectorCards,d);Y.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvaW5pdGlhbENhcmRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9pbmRleC5qcyJdLCJuYW1lcyI6WyJDYXJkIiwidGVtcGxhdGUiLCJpdGVtIiwiaGFuZGxlQ2FyZENsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lciIsInRleHRDb250ZW50IiwiY2FyZFZhbHVlIiwic3JjIiwiYWx0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jbGlja0xpa2UiLCJfZGVsZXRlQ2FyZHMiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybVNlbGVjdG9yIiwiYWxsQ2xhc3NlcyIsIl9mb3JtU2VsZWN0b3IiLCJfcG9wdXBUZXh0IiwicG9wdXBUZXh0IiwiX3BvcHVwQnV0dG9uIiwicG9wdXBCdXR0b24iLCJfcG9wdXBUZXh0TmFtZUVycm9yIiwicG9wdXBUZXh0TmFtZUVycm9yIiwiX3BvcHVwQnV0b25BY3RpdmUiLCJwb3B1cEJ1dG9uQWN0aXZlIiwiZWxlbWVudCIsIm1lc3NhZ2VFcnJvciIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwidGV4dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0TGlzdCIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJidXR0b25FbGVtZW50IiwiX2hhc05vdFZhbGlkSW5wdXQiLCJidXR0b25BY3RpdmUiLCJidXR0b25GYWxzZSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b25JbnB1dCIsImZvckVhY2giLCJfaXNWYWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiaW5pdGlhbENhcmRzIiwicmV2ZXJzZSIsIlBvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjbG9zZSIsIlBvcHVwV2l0aEZvcm0iLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9mb3JtIiwiX2Zvcm1FbGVtZW50Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FzZSIsInZhbHVlIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJhbGxDbGFzZXNDYXNlIiwiZm9ybVNlbGVjdG9yQ2FyZHMiLCJwb3B1cEVkaXQiLCJvcGVuQnV0dG9uUG9wdXAiLCJvcGVuQnV0dG9uUG9wdXBBZGQiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImZvcm1FbGVtZW50IiwicGhvdG9DYXJkcyIsInBob3RvSW1hZ2UiLCJ0ZXh0SW1hZ2UiLCJwb3B1cENhcmRzIiwicG9wdXBOYW1lQ2FyZHMiLCJwb3B1cEpvYkNhcmRzIiwicG9wdXBCdXR0b25TYXZlIiwicG9wdXBCdXR0b25TYXZlQnV0dG9uIiwiaW5wdXRFcnJvck5hbWUiLCJnZXRFbGVtZW50QnlJZCIsImlucHV0RXJyb3JEYXRhIiwiaW5wdXROYW1lRXJyb3IiLCJpbnB1dEVycm9yVXJsIiwiUG9wdXBXaXRoSW1hZ2UiLCJpbWFnZU5hbWUiLCJpbWFnZVNyYyIsIlNlY3Rpb24iLCJpdGVtcyIsIl9pdGVtcyIsInByZXBlbmQiLCJlZGl0SW5mb1VzZXIiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lU2VsZWN0b3IiLCJfam9iU2VsZWN0b3IiLCJqb2IiLCJlZGl0UG9wdXBDbGFzcyIsImFkZEZvcm1TdWJtaXRIYW5kbGVyIiwic2V0VXNlckluZm8iLCJ0YXJnZXQiLCJjb250YWlucyIsInZhbGlkYXRlRWRpdCIsInJlbW92ZUVycm9yIiwidmFsaWRhdGVDYXJkIiwiZm9ybVBvcHVwIiwiY2FyZHNJbWFnZSIsImNhcmRzRWxlbWVudCIsIm9wZW4iLCJnZW5lcmF0ZUNhcmQiLCJjYXJkc0RvbmUiLCJhZGRJdGVtIiwicmVuZGVyRWxlbWVudCIsImdldFVzZXJJbmZvIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJtYXBwaW5ncyI6InlMQUFPLElBQU1BLEVBQWIsV0FDSSxhQUFxQ0MsR0FBUyxJQUFqQ0MsRUFBaUMsRUFBakNBLEtBQU1DLEVBQTJCLEVBQTNCQSxpQiw0RkFBMkIsU0FDMUNDLEtBQUtDLE1BQVFILEVBQUtJLEtBQ2xCRixLQUFLRyxNQUFRTCxFQUFLTSxLQUNsQkosS0FBS0ssVUFBWVIsRUFDakJHLEtBQUtNLGlCQUFtQlAsRSxRQUxoQyxPLEVBQUEsRyxFQUFBLHNDQWFRLE9BSm9CUSxTQUFTQyxjQUFjUixLQUFLSyxXQUMvQ0ksUUFDQUQsY0FBYyxnQkFDZEUsV0FBVSxLQVpuQixxQ0FpQlFWLEtBQUtXLFNBQVdYLEtBQUtZLGVBQ3JCWixLQUFLYSxvQkFFTGIsS0FBS1csU0FBU0gsY0FBYyxnQkFBZ0JNLFlBQWNkLEtBQUtDLE1BQy9ELElBQU1jLEVBQVlmLEtBQUtXLFNBQVNILGNBQWMsaUJBSzlDLE9BSEFPLEVBQVVDLElBQU1oQixLQUFLRyxNQUNyQlksRUFBVUUsSUFBTWpCLEtBQUtDLE1BRWRELEtBQUtXLFdBMUJwQixtQ0E4QlFYLEtBQUtXLFNBQVNILGNBQWMsZ0JBQWdCVSxVQUFVQyxPQUFPLHdCQTlCckUscUNBa0NRbkIsS0FBS1csU0FBU1MsU0FDZHBCLEtBQUtXLFNBQVcsT0FuQ3hCLDBDQXNDdUIsV0FDZlgsS0FBS1csU0FBU0gsY0FBYyxnQkFBZ0JhLGlCQUFpQixTQUFTLFdBQ2xFLEVBQUtDLGdCQUVUdEIsS0FBS1csU0FBU0gsY0FBYyxrQkFBa0JhLGlCQUFpQixTQUFTLFdBQ3BFLEVBQUtFLGtCQUVUdkIsS0FBS1csU0FBU0gsY0FBYyxpQkFBaUJhLGlCQUFpQixTQUFTLFdBQ25FLEVBQUtmLDJCLGlCQTlDakIsSyxzS0NDTyxJQUFNa0IsRUFBYixXQUNJLFdBQVlDLEVBQWNDLEksNEZBQVcsU0FDakMxQixLQUFLMkIsY0FBZ0JwQixTQUFTQyxjQUFjaUIsR0FDNUN6QixLQUFLNEIsV0FBYUYsRUFBV0csVUFDN0I3QixLQUFLOEIsYUFBZUosRUFBV0ssWUFDL0IvQixLQUFLZ0Msb0JBQXNCTixFQUFXTyxtQkFDdENqQyxLQUFLa0Msa0JBQW9CUixFQUFXUyxpQixRQU41QyxPLEVBQUEsRyxFQUFBLHVDQVNvQkMsRUFBU0MsR0FDckIsSUFBTUMsRUFBZXRDLEtBQUsyQixjQUFjbkIsY0FBbkIsV0FBcUM0QixFQUFRRyxHQUE3QyxXQUNyQkgsRUFBUWxCLFVBQVVzQixJQUFJeEMsS0FBS2dDLHFCQUMzQk0sRUFBYXhCLFlBQWN1QixJQVpuQyxzQ0FnQm9CRCxHQUNaLElBQU1FLEVBQWV0QyxLQUFLMkIsY0FBY25CLGNBQW5CLFdBQXFDNEIsRUFBUUcsR0FBN0MsV0FDckJILEVBQVFsQixVQUFVRSxPQUFPcEIsS0FBS2dDLHFCQUM5Qk0sRUFBYXhCLFlBQWMsS0FuQm5DLGtDQXNCZ0JzQixFQUFTSyxHQUNqQkEsRUFBSzNCLFlBQWMsR0FDbkJzQixFQUFRbEIsVUFBVUUsT0FBT3BCLEtBQUtnQyx1QkF4QnRDLCtCQTRCYUksR0FDREEsRUFBUU0sU0FBU0MsTUFHakIzQyxLQUFLNEMsZ0JBQWdCUixHQUZyQnBDLEtBQUs2QyxnQkFBZ0JULEVBQVNBLEVBQVFVLHFCQTlCbEQsd0NBb0NzQkMsR0FDZCxPQUFPQSxFQUFVQyxNQUFLLFNBQUNDLEdBQUQsT0FBbUJBLEVBQWFQLFNBQVNDLFdBckN2RSx5Q0F5Q3VCSSxFQUFXRyxHQUN2QmxELEtBQUttRCxrQkFBa0JKLEdBQ3RCL0MsS0FBS29ELGFBQWFGLEdBRWxCbEQsS0FBS3FELFlBQVlILEtBN0M3QixtQ0FpRGlCQSxHQUNUQSxFQUFjaEMsVUFBVXNCLElBQUl4QyxLQUFLa0MsbUJBQ2pDZ0IsRUFBY0ksYUFBYSxZQUFZLEtBbkQvQyxrQ0FzRGdCSixHQUNSQSxFQUFjaEMsVUFBVUUsT0FBT3BCLEtBQUtrQyxtQkFDcENnQixFQUFjSyxnQkFBZ0IsY0F4RHRDLHdDQTREc0JuQixHQUFRLFdBQ2hCVyxFQUFZUyxNQUFNQyxLQUFLckIsRUFBUXNCLGlCQUFpQjFELEtBQUs0QixhQUNyRCtCLEVBQWN2QixFQUFRNUIsY0FBY1IsS0FBSzhCLGNBQy9DaUIsRUFBVWEsU0FBUSxTQUFDOUQsR0FDZkEsRUFBS3VCLGlCQUFpQixTQUFTLFdBQzNCLEVBQUt3QyxTQUFTL0QsR0FDZCxFQUFLZ0UsbUJBQW1CZixFQUFXWSxTQUczQzNELEtBQUs4RCxtQkFBbUJmLEVBQVdZLEtBckUzQyx5Q0EwRVEsSUFBTUEsRUFBY3BELFNBQVNDLGNBQWNSLEtBQUs4QixjQUNoRDlCLEtBQUsyQixjQUFjTixpQkFBaUIsVUFBVSxTQUFDMEMsR0FDdkNBLEVBQUlDLG9CQUVaaEUsS0FBS3FELFlBQVlNLEdBQ2pCM0QsS0FBS2Esa0JBQWtCYixLQUFLMkIsb0IsaUJBL0VwQyxLQ0Rhc0MsRUFBZSxDQUN4QixDQUNJL0QsS0FBTSxRQUNORSxLQUFNLGlGQUVWLENBQ0lGLEtBQU0sc0JBQ05FLEtBQU0sNkZBRVYsQ0FDSUYsS0FBTSxVQUNORSxLQUFNLGtGQUVWLENBQ0lGLEtBQU0sV0FDTkUsS0FBTSxvRkFFVixDQUNJRixLQUFNLHFCQUNORSxLQUFNLDZGQUVWLENBQ0lGLEtBQU0sU0FDTkUsS0FBTSxrRixzS0FHZDZELEVBQWFDLFVDMUJOLElBQU1DLEVBQWIsV0FDSSxXQUFZMUMsSSw0RkFBYSxTQUNyQnpCLEtBQUsyQixjQUFnQnBCLFNBQVNDLGNBQWNpQixHQUM1Q3pCLEtBQUtvRSxnQkFBa0JwRSxLQUFLb0UsZ0JBQWdCQyxLQUFLckUsTSxRQUh6RCxPLEVBQUEsRyxFQUFBLDhCQU9RQSxLQUFLMkIsY0FBY1QsVUFBVXNCLElBQUksZ0JBQ2pDakMsU0FBU2MsaUJBQWlCLFVBQVdyQixLQUFLb0UsbUJBUmxELDhCQVlRcEUsS0FBSzJCLGNBQWNULFVBQVVFLE9BQU8sZ0JBQ3BDYixTQUFTK0Qsb0JBQW9CLFVBQVd0RSxLQUFLb0UsbUJBYnJELHNDQWdCb0JMLEdBQ0csV0FBWkEsRUFBSVEsS0FDSHZFLEtBQUt3RSxVQWxCakIsMENBcUJ1QixXQUNmeEUsS0FBSzJCLGNBQWNuQixjQUFjLGlCQUFpQmEsaUJBQWlCLFNBQVMsV0FDeEUsRUFBS21ELGMsaUJBdkJqQixLLDhrQ0NDTyxJQUFNQyxFQUFiLGEsa09BQUEsVSxRQUFBLEcsRUFBQSxFLDBZQUNJLFdBQVloRCxFQUFjaUQsR0FBUyxhLDRGQUFBLFVBQy9CLGNBQU1qRCxJQUNEa0QsVUFBWUQsRUFDakIsRUFBS0UsTUFBUSxFQUFLakQsY0FBY25CLGNBQWMscUJBQzlDLEVBQUtxRSxhQUFlLEVBQUtsRCxjQUFjK0IsaUJBQWlCLGdCQUN4RCxFQUFLb0Isb0JBTDBCLEVBRHZDLE8sRUFBQSxHLEVBQUEseUNBUXFCLFdBT2IsT0FMQTlFLEtBQUsrRSxNQUFRLEdBRWIvRSxLQUFLNkUsYUFBYWpCLFNBQVEsU0FBQTlELEdBQ3RCLEVBQUtpRixNQUFNakYsRUFBS0ksTUFBUUosRUFBS2tGLFNBRTFCaEYsS0FBSytFLFFBZnBCLDhCQWtCUS9FLEtBQUs0RSxNQUFNSyxRQUNYLDRDQW5CUiwwQ0FzQnVCLFdBQ2ZqRixLQUFLMkIsY0FBY04saUJBQWlCLFVBQVUsV0FDMUMsRUFBS3NELFVBQVUsRUFBS08sbUJBQ3BCLEVBQUtWLFdBRVQsMkQsaUJBM0JSLEdBQW1DTCxHQ0Q3QmdCLEVBQWdCLENBQ2xCMUQsYUFBYyxvQkFDZDJELGtCQUFtQiwrQkFDbkJ2RCxVQUFXLGVBQ1hFLFlBQWEsaUJBQ2JFLG1CQUFvQix5QkFDcEJFLGlCQUFrQiw0QkFHaEJrRCxFQUFZOUUsU0FBU0MsY0FBYyxVQUNuQzhFLEVBQWtCL0UsU0FBU0MsY0FBYyw2QkFDekMrRSxFQUFxQmhGLFNBQVNDLGNBQWMsaUJBQzVDZ0YsRUFBWWpGLFNBQVNDLGNBQWMsMkJBQ25DaUYsRUFBV2xGLFNBQVNDLGNBQWMsMEJBR2xDa0YsR0FGYW5GLFNBQVNDLGNBQWMsb0JBQ3hCRCxTQUFTQyxjQUFjLHlCQUNyQkQsU0FBU0MsY0FBYyxzQkFDckNtRixFQUFhcEYsU0FBU0MsY0FBYyxVQUNwQ29GLEVBQWFyRixTQUFTQyxjQUFjLGlCQUNwQ3FGLEVBQVl0RixTQUFTQyxjQUFjLGdCQUNuQ3NGLEVBQWF2RixTQUFTQyxjQUFjLGdCQUNwQ3VGLEVBQWlCeEYsU0FBU0MsY0FBYywyQkFDeEN3RixFQUFnQnpGLFNBQVNDLGNBQWMsMEJBQ3ZDeUYsRUFBa0IxRixTQUFTQyxjQUFjLDRCQUN6QzBGLEVBQXdCM0YsU0FBU0MsY0FBYyw0QkFDL0MyRixFQUFpQjVGLFNBQVM2RixlQUFULG9CQUNqQkMsRUFBaUI5RixTQUFTNkYsZUFBVCxtQkFDakJFLEVBQWlCL0YsU0FBUzZGLGVBQWUsb0JBQ3pDRyxFQUFnQmhHLFNBQVM2RixlQUFlLG1CLDhrQ0N6QnZDLElBQU1JLEVBQWIsYSxrT0FBQSxVLFFBQUEsRyxFQUFBLEUsMFlBQ0ksV0FBWS9FLEdBQWEsTyw0RkFBQSxxQkFDZkEsR0FGZCxPLEVBQUEsRyxFQUFBLDRCQUtTZ0YsRUFBV0MsR0FDWmQsTUFBaUJjLEVBQ2pCZCxNQUFpQmEsRUFDakJaLGNBQXdCWSxFQUN4QixzREFDQSw4QyxpQkFWUixHQUFvQ3RDLEcsc0tDSDdCLElBQU13QyxFQUFiLFdBQ0ksYUFBK0JsRixHQUFhLElBQS9CbUYsRUFBK0IsRUFBL0JBLE1BQU9sQyxFQUF3QixFQUF4QkEsVSw0RkFBd0IsU0FDeEMxRSxLQUFLNkcsT0FBU0QsRUFDZDVHLEtBQUsyRSxVQUFZRCxFQUNqQjFFLEtBQUsyQixjQUFnQnBCLFNBQVNDLGNBQWNpQixHLFFBSnBELE8sRUFBQSxHLEVBQUEsdUNBT21CLFdBQ1h6QixLQUFLNkcsT0FBT2pELFNBQVEsU0FBQTlELEdBQ2hCLEVBQUs2RSxVQUFVN0UsUUFUM0IsOEJBY1lzQyxHQUNKcEMsS0FBSzJCLGNBQWNtRixRQUFRMUUsUSxpQkFmbkMsSyxzS0NDTyxJQ2dCRDJFLEVBQWUsSURoQnJCLFdBQ0ksY0FBd0MsSUFBM0JDLEVBQTJCLEVBQTNCQSxhQUFjQyxFQUFhLEVBQWJBLGEsNEZBQWEsU0FDcENqSCxLQUFLa0gsY0FBZ0IzRyxTQUFTQyxjQUFjd0csR0FDNUNoSCxLQUFLbUgsYUFBZTVHLFNBQVNDLGNBQWN5RyxHLFFBSG5ELE8sRUFBQSxHLEVBQUEscUNBTVEsTUFBTyxDQUFFL0csS0FBTUYsS0FBS2tILGNBQWNwRyxZQUFhc0csSUFBS3BILEtBQUttSCxhQUFhckcsZUFOOUUsa0NBUWdCWixFQUFNRSxHQUNkSixLQUFLa0gsY0FBY3BHLFlBQWNaLEVBQ2pDRixLQUFLbUgsYUFBYXJHLFlBQWNWLE8saUJBVnhDLEtDZ0JxQixDQUFhLENBQUM0RyxhQUFjLG1CQUFvQkMsWUFBYSwwQkFDNUVJLEVBQWlCLElBQUlsRCxFQUFNLFVBRzNCbUQsRUFBdUIsU0FBQ3ZELEdBQzFCQSxFQUFJQyxpQkFDSitDLEVBQWFRLFlBQVkvQixFQUFVUixNQUFPUyxFQUFTVCxPQUNuRHFDLEVBQWU3QyxTQW1CbkJhLEVBQVVoRSxpQkFBaUIsU0FBUyxTQUFDMEMsSUFDOUJBLEVBQUl5RCxPQUFPdEcsVUFBVXVHLFNBQVMsVUFBWTFELEVBQUl5RCxPQUFPdEcsVUFBVXVHLFNBQVMsbUJBQ3ZFL0Isc0JBQWdDLFNBQVU0QixHQUMxQ0ksRUFBYUMsWUFBWW5DLEVBQVdhLEdBQ3BDcUIsRUFBYUMsWUFBWWxDLEVBQVVVLEdBQ25Da0IsRUFBZTdDLFlBS3ZCc0IsRUFBV3pFLGlCQUFpQixTQUFTLFNBQUMwQyxJQUMvQkEsRUFBSXlELE9BQU90RyxVQUFVdUcsU0FBUyxnQkFBa0IxRCxFQUFJeUQsT0FBT3RHLFVBQVV1RyxTQUFTLDhCQUM3RUcsRUFBYUQsWUFBWTVCLEVBQWdCTyxHQUN6Q3NCLEVBQWFELFlBQVkzQixFQUFlTyxHQUN4Q3NCLEVBQVVyRCxZQUtsQm1CLEVBQVd0RSxpQkFBaUIsU0FBUyxTQUFDMEMsSUFDL0JBLEVBQUl5RCxPQUFPdEcsVUFBVXVHLFNBQVMsVUFBWTFELEVBQUl5RCxPQUFPdEcsVUFBVXVHLFNBQVMsa0JBQ3ZFSyxFQUFXdEQsV0FLbkIsSUFBTUUsRUFBVyxTQUFDNUUsR0FDYixJQUtLaUksRUFMUSxJQUFJbkksRUFBSyxDQUFDRSxPQUN2QkMsZ0JBQWlCLFdBQ1orSCxFQUFXRSxLQUFLbEksRUFBS0ksS0FBTUosRUFBS00sUUFFbkMsb0JBQ3VCNkgsZUFDMUJDLEVBQVVDLFFBQVFKLElBSWhCRixFQUFZLElBQUlwRCxFQUFjLGlCQUFpQixTQUFDM0UsR0FBVTRFLEVBQVM1RSxNQUduRWdJLEVBQWEsSUFBSXRCLEVBQWUsVUFHaEMwQixFQUFZLElBQUl2QixFQUFRLENBQUVDLE1BQU8zQyxFQUFjUyxZQUFXLFVBQ2hFd0QsRUFBVUUsY0FBY25FLEdBRXhCc0IsRUFBbUJsRSxpQkFBaUIsU0E3RGQsV0FDbEJ1RyxFQUFheEUsYUFBYTZDLEdBQzFCNEIsRUFBVUcsVUE0RGQxQyxFQUFnQmpFLGlCQUFpQixTQXhEaEIsV0FDYm1FLFFBQWtCdUIsRUFBYXNCLGNBQWNuSSxLQUM3Q3VGLFFBQWlCc0IsRUFBYXNCLGNBQWNqQixJQUM1Q0MsRUFBZVcsT0FDZk4sRUFBYXJFLFlBQVk2QyxHQUN6QlIsbUJBQTZCLFNBQVU0QixNQXFEM0MsSUFBTUksRUFBZSxJQUFJbEcsRUFBYzJELEVBQWMxRCxhQUFjMEQsR0FDbkV1QyxFQUFhWSxtQkFFYixJQUFNVixFQUFlLElBQUlwRyxFQUFjMkQsRUFBY0Msa0JBQW1CRCxHQUN4RXlDLEVBQWFVLG9CIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3Ioe2l0ZW0sIGhhbmRsZUNhcmRDbGlja30sIHRlbXBsYXRlKXtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGl0ZW0ubmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGl0ZW0ubGluaztcbiAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIH1cblxuICAgIF9nZXRUZW1wbGF0ZSgpe1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGUpXG4gICAgICAgIC5jb250ZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2l0ZW0nKVxuICAgICAgICAuY2xvbmVOb2RlKHRydWUpXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgICB9XG4gICAgLy8gQ9C+0LfQtNCw0L3QuNC1INC4INC30LDQv9C+0LvQvdC10L3QuNC1INC60LDRgNGC0L7Rh9C60LhcbiAgICBnZW5lcmF0ZUNhcmQoKXtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIoKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fdGV4dCcpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgY29uc3QgY2FyZFZhbHVlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2ltYWdlJyk7XG5cbiAgICAgICAgY2FyZFZhbHVlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICAgIGNhcmRWYWx1ZS5hbHQgPSB0aGlzLl9uYW1lO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICAgIH1cbiAgICAvLyDQm9Cw0LnQulxuICAgIF9jbGlja0xpa2UgKCl7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19saWtlJykuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZHNfX2xpa2VfYWN0aXZlJyk7XG4gICAgfSAgIFxuICAgIC8vINCj0LTQsNC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LrQuFxuICAgIF9kZWxldGVDYXJkcygpe1xuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gICAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0LLRgdC10YUg0L7QsdGA0LDQsdC+0YLRh9C40LrQvtCyINC60LDRgNGC0L7Rh9C60LhcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcigpe1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fbGlrZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT57XG4gICAgICAgICAgICB0aGlzLl9jbGlja0xpa2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2RlbGV0ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT57XG4gICAgICAgICAgICB0aGlzLl9kZWxldGVDYXJkcygpO1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19faW1hZ2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+e1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiXG5leHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoZm9ybVNlbGVjdG9yLCBhbGxDbGFzc2VzKXtcbiAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9wb3B1cFRleHQgPSBhbGxDbGFzc2VzLnBvcHVwVGV4dDtcbiAgICAgICAgdGhpcy5fcG9wdXBCdXR0b24gPSBhbGxDbGFzc2VzLnBvcHVwQnV0dG9uO1xuICAgICAgICB0aGlzLl9wb3B1cFRleHROYW1lRXJyb3IgPSBhbGxDbGFzc2VzLnBvcHVwVGV4dE5hbWVFcnJvcjtcbiAgICAgICAgdGhpcy5fcG9wdXBCdXRvbkFjdGl2ZSA9IGFsbENsYXNzZXMucG9wdXBCdXRvbkFjdGl2ZTtcbiAgICB9XG4gICAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0Y3Qu9C10LzQtdC90YLQsCDQvtGI0LjQsdC60LhcbiAgICBfc2hvd0lucHV0RXJyb3IoZWxlbWVudCwgbWVzc2FnZUVycm9yKXtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoYCMke2VsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9wb3B1cFRleHROYW1lRXJyb3IpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBtZXNzYWdlRXJyb3I7XG4gICAgfVxuXG4gICAgLy8g0KHQutGA0YvRgtC40LUg0Y3Qu9C10LzQtdC90YLQsCDQvtGI0LjQsdC60LhcbiAgICBfaGlkZUlucHV0RXJyb3IoZWxlbWVudCl7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yKGAjJHtlbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fcG9wdXBUZXh0TmFtZUVycm9yKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9XG4gICAgLy8g0KPQtNCw0LvQtdC90LjQtSDRgtC10LrRgdGC0LAg0L7RiNC40LHQutC4INC/0YDQuCDQt9Cw0LrRgNGL0YLQuNC4INC/0L7Qv9Cw0L/QvtCyXG4gICAgcmVtb3ZlRXJyb3IoZWxlbWVudCwgdGV4dCl7XG4gICAgICAgIHRleHQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fcG9wdXBUZXh0TmFtZUVycm9yKTtcbiAgICB9XG5cbiAgICAvLyDQn9GA0L7QstC10YDQutCwINCy0LDQu9C40LTQvdC+0YHRgtC4INC/0L7Qu9GPIFxuICAgIF9pc1ZhbGlkKGVsZW1lbnQpe1xuICAgICAgICBpZighZWxlbWVudC52YWxpZGl0eS52YWxpZCl7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihlbGVtZW50LCBlbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vINCf0YDQvtCy0LXRgNC60LAg0LLQsNC70LjQtNC90L7RgdGC0LhcbiAgICBfaGFzTm90VmFsaWRJbnB1dChpbnB1dExpc3Qpe1xuICAgICAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gICAgfVxuXG4gICAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0LrQu9Cw0YHRgdCwINC60L3QvtC/0LrQuCAoINCw0LrRgtC40LLQvdCw0Y8gLyDQvdC1INCw0LrRgtC40LLQvdCw0Y8pXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCl7XG4gICAgICAgIGlmKHRoaXMuX2hhc05vdFZhbGlkSW5wdXQoaW5wdXRMaXN0KSl7XG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkFjdGl2ZShidXR0b25FbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uRmFsc2UoYnV0dG9uRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBidXR0b25BY3RpdmUoYnV0dG9uRWxlbWVudCl7XG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9wb3B1cEJ1dG9uQWN0aXZlKTtcbiAgICAgICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgYnV0dG9uRmFsc2UoYnV0dG9uRWxlbWVudCl7XG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9wb3B1cEJ1dG9uQWN0aXZlKTtcbiAgICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgfVxuXG4gICAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQsCDQstGB0LXQvCDQv9C+0LvRj9C8INGE0L7RgNC80YtcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcihlbGVtZW50KXtcbiAgICAgICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fcG9wdXBUZXh0KSk7XG4gICAgICAgIGNvbnN0IGJ1dHRvbklucHV0ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwQnV0dG9uKTtcbiAgICAgICAgaW5wdXRMaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PntcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1ZhbGlkKGl0ZW0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uSW5wdXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbklucHV0KTtcbiAgICB9XG5cbiAgICAvLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutCwINGE0L7RgNC80LDQvFxuICAgIGVuYWJsZVZhbGlkYXRpb24oKXtcbiAgICAgICAgY29uc3QgYnV0dG9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwQnV0dG9uKTtcbiAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHRoaXMuYnV0dG9uRmFsc2UoYnV0dG9uSW5wdXQpO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XG4gICAgfVxufSIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4gICAgfVxuXTtcbmluaXRpYWxDYXJkcy5yZXZlcnNlKCk7IiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKGZvcm1TZWxlY3Rvcil7XHJcbiAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCl7XHJcbiAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgICAgLy8gdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKXtcclxuICAgICAgICB0aGlzLl9mb3JtU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KXtcclxuICAgICAgICBpZihldnQua2V5ID09PSAnRXNjYXBlJyl7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHRoaXMuX2Zvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1BvcHVwfSBmcm9tICcuL1BvcHVwLmpzJztcclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtU2VsZWN0b3IsIHJlbmRlcmVyKXtcclxuICAgICAgICBzdXBlcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX2Zvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRhaW5lcicpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fdGV4dCcpO1xyXG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpe1xyXG5cclxuICAgICAgICB0aGlzLl9jYXNlID0ge307XHJcblxyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmZvckVhY2goaXRlbSA9PntcclxuICAgICAgICAgICAgdGhpcy5fY2FzZVtpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXNlO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKXtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCkgO1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICB0aGlzLl9mb3JtU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbn0iLCJjb25zdCBhbGxDbGFzZXNDYXNlID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19jb250YWluZXInLFxyXG4gICAgZm9ybVNlbGVjdG9yQ2FyZHM6ICcucG9wdXBfX2NvbnRhaW5lcl9jYXJkc19pdGVtJyxcclxuICAgIHBvcHVwVGV4dDogJy5wb3B1cF9fdGV4dCcsXHJcbiAgICBwb3B1cEJ1dHRvbjogJy5wb3B1cF9fYnV0dG9uJyxcclxuICAgIHBvcHVwVGV4dE5hbWVFcnJvcjogJ3BvcHVwX190ZXh0X25hbWVfZXJyb3InLFxyXG4gICAgcG9wdXBCdXRvbkFjdGl2ZTogJ3BvcHVwX19idXR0b25fYWN0aXZlX25vdCdcclxufTtcclxuXHJcbmNvbnN0IHBvcHVwRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cCcpO1xyXG5jb25zdCBvcGVuQnV0dG9uUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdF9vcGVuX3BvcHVwJyk7XHJcbmNvbnN0IG9wZW5CdXR0b25Qb3B1cEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQnKTtcclxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX190ZXh0X25hbWVfaW5wdXQnKTtcclxuY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RleHRfam9iX2lucHV0Jyk7XHJcbmNvbnN0IG5hbWVBdXRob3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXV0aG9yJyk7XHJcbmNvbnN0IGpvYkF1dGhvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpO1xyXG5jb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyJyk7XHJcbmNvbnN0IHBob3RvQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8nKTtcclxuY29uc3QgcGhvdG9JbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90b19faW1hZ2UnKTtcclxuY29uc3QgdGV4dEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvX190ZXh0Jyk7XHJcbmNvbnN0IHBvcHVwQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfY2FyZHMnKTtcclxuY29uc3QgcG9wdXBOYW1lQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RleHRfbmFtZV9jYXJkcycpO1xyXG5jb25zdCBwb3B1cEpvYkNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX190ZXh0X2pvYl9jYXJkcycpXHJcbmNvbnN0IHBvcHVwQnV0dG9uU2F2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uX3NhdmVfZm9ybScpO1xyXG5jb25zdCBwb3B1cEJ1dHRvblNhdmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbl9mb3JtX3NhdmUnKTtcclxuY29uc3QgaW5wdXRFcnJvck5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbmFtZS1pbnB1dC1lcnJvcmApO1xyXG5jb25zdCBpbnB1dEVycm9yRGF0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBqb2ItaW5wdXQtZXJyb3JgKTtcclxuY29uc3QgaW5wdXROYW1lRXJyb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXQtbmFtZS1lcnJvcicpO1xyXG5jb25zdCBpbnB1dEVycm9yVXJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VybC1pbnB1dC1lcnJvcicpO1xyXG5cclxuZXhwb3J0e3Bob3RvQ2FyZHMsIHBob3RvSW1hZ2UsIHRleHRJbWFnZSwgbmFtZUF1dGhvciwgam9iQXV0aG9yLCBpbnB1dEVycm9yVXJsLCBpbnB1dE5hbWVFcnJvcixcclxuICAgIGlucHV0RXJyb3JEYXRhLCBpbnB1dEVycm9yTmFtZSwgcG9wdXBCdXR0b25TYXZlQnV0dG9uLCBwb3B1cEJ1dHRvblNhdmUsIHBvcHVwSm9iQ2FyZHMsIHBvcHVwTmFtZUNhcmRzLCBcclxuICAgIHBvcHVwQ2FyZHMsIGZvcm1FbGVtZW50LCBqb2JJbnB1dCwgbmFtZUlucHV0LCAgb3BlbkJ1dHRvblBvcHVwQWRkLCBvcGVuQnV0dG9uUG9wdXAsIHBvcHVwRWRpdCwgYWxsQ2xhc2VzQ2FzZX07XHJcbiIsImltcG9ydCB7cGhvdG9JbWFnZSwgdGV4dEltYWdlfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB7UG9wdXB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoZm9ybVNlbGVjdG9yKXtcclxuICAgICAgICBzdXBlcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oaW1hZ2VOYW1lLCBpbWFnZVNyYyl7XHJcbiAgICAgICAgcGhvdG9JbWFnZS5zcmMgPSBpbWFnZVNyYztcclxuICAgICAgICBwaG90b0ltYWdlLmFsdCA9IGltYWdlTmFtZTtcclxuICAgICAgICB0ZXh0SW1hZ2UudGV4dENvbnRlbnQgPSBpbWFnZU5hbWU7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcbn0gIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGZvcm1TZWxlY3Rvcil7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybVNlbGVjdG9yKTtcclxuICAgIH1cclxuICAgIC8vINC+0YLQstC10YfQsNC10YIg0LfQsCDQvtGC0YDQuNGB0L7QstC60YMg0LLRgdC10YUg0Y3Qu9C10LzQtdC90YLQvtCyIFxyXG4gICAgcmVuZGVyRWxlbWVudCgpe1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINC/0YDQuNC90LjQvNCw0LXRgiBET00t0Y3Qu9C10LzQtdC90YIg0Lgg0LTQvtCx0LDQstC70Y/QtdGCINC10LPQviDQsiDQutC+0L3RgtC10LnQvdC10YBcclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm1TZWxlY3Rvci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG59IiwiXHJcbmV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7bmFtZVNlbGVjdG9yLCBqb2JTZWxlY3Rvcn0pe1xyXG4gICAgICAgIHRoaXMuX25hbWVTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9qb2JTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gICAgZ2V0VXNlckluZm8oKXtcclxuICAgICAgICByZXR1cm4geyBuYW1lOiB0aGlzLl9uYW1lU2VsZWN0b3IudGV4dENvbnRlbnQsIGpvYjogdGhpcy5fam9iU2VsZWN0b3IudGV4dENvbnRlbnR9O1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckluZm8obmFtZSwgbGluayl7XHJcbiAgICAgICAgdGhpcy5fbmFtZVNlbGVjdG9yLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9qb2JTZWxlY3Rvci50ZXh0Q29udGVudCA9IGxpbms7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcyc7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi9DYXJkLmpzJztcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSAnLi9pbml0aWFsQ2FyZHMuanMnO1xuaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tICcuL1NlY3Rpb24uanMnO1xuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuL1VzZXJJbmZvLmpzJztcbmltcG9ydCB7cGhvdG9DYXJkcywgaW5wdXRFcnJvclVybCwgaW5wdXROYW1lRXJyb3IsXG4gICAgICAgIGlucHV0RXJyb3JEYXRhLCBpbnB1dEVycm9yTmFtZSwgcG9wdXBCdXR0b25TYXZlQnV0dG9uLFxuICAgICAgICBwb3B1cEJ1dHRvblNhdmUsIHBvcHVwSm9iQ2FyZHMsIHBvcHVwTmFtZUNhcmRzLFxuICAgICAgICBwb3B1cENhcmRzLCBmb3JtRWxlbWVudCwgam9iSW5wdXQsIG5hbWVJbnB1dCxcbiAgICAgICAgb3BlbkJ1dHRvblBvcHVwQWRkLCBvcGVuQnV0dG9uUG9wdXAsIHBvcHVwRWRpdCwgXG4gICAgICAgIGFsbENsYXNlc0Nhc2V9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuLy8g0KHQvtC30LTQsNC90LjQtSDQutC70LDRgdGB0LAg0LTQu9GPINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cbmNvbnN0IGVkaXRJbmZvVXNlciA9IG5ldyBVc2VySW5mbyh7bmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX2F1dGhvcicsIGpvYlNlbGVjdG9yOiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJ30pO1xuY29uc3QgZWRpdFBvcHVwQ2xhc3MgPSBuZXcgUG9wdXAoJy5wb3B1cCcpO1xuXG4vLyDQl9Cw0L/QvtC70L3QtdC90LjQtSDRhNC+0YDQvNGLINC00LvRjyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPXG5jb25zdCBhZGRGb3JtU3VibWl0SGFuZGxlciA9IChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBlZGl0SW5mb1VzZXIuc2V0VXNlckluZm8obmFtZUlucHV0LnZhbHVlLCBqb2JJbnB1dC52YWx1ZSk7XG4gICAgZWRpdFBvcHVwQ2xhc3MuY2xvc2UoKTtcbn1cblxuLy8g0J7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/INC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQtdC6XG5jb25zdCBhZGRQb3B1cENhcmRzID0gKCkgPT4ge1xuICAgIHZhbGlkYXRlQ2FyZC5idXR0b25BY3RpdmUocG9wdXBCdXR0b25TYXZlKTtcbiAgICBmb3JtUG9wdXAub3BlbigpO1xufVxuXG4vLyDQntGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L0g0LTQu9GPINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cbmNvbnN0IGFkZFBvcHVwID0gKCkgPT4ge1xuICAgIG5hbWVJbnB1dC52YWx1ZSA9IGVkaXRJbmZvVXNlci5nZXRVc2VySW5mbygpLm5hbWU7XG4gICAgam9iSW5wdXQudmFsdWUgPSBlZGl0SW5mb1VzZXIuZ2V0VXNlckluZm8oKS5qb2I7XG4gICAgZWRpdFBvcHVwQ2xhc3Mub3BlbigpO1xuICAgIHZhbGlkYXRlRWRpdC5idXR0b25GYWxzZShwb3B1cEJ1dHRvblNhdmVCdXR0b24pO1xuICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFkZEZvcm1TdWJtaXRIYW5kbGVyKTtcbn1cblxuLy8g0LfQsNC60YDRi9GC0LjQtSDQtNC70Y8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRj1xucG9wdXBFZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgIGlmKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UnKSl7XG4gICAgICAgIGZvcm1FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFkZEZvcm1TdWJtaXRIYW5kbGVyKTsgICAgIFxuICAgICAgICB2YWxpZGF0ZUVkaXQucmVtb3ZlRXJyb3IobmFtZUlucHV0LCBpbnB1dEVycm9yRGF0YSk7XG4gICAgICAgIHZhbGlkYXRlRWRpdC5yZW1vdmVFcnJvcihqb2JJbnB1dCwgaW5wdXRFcnJvck5hbWUpO1xuICAgICAgICBlZGl0UG9wdXBDbGFzcy5jbG9zZSgpO1xuICAgIH1cbn0pO1xuXG4vLyDQt9Cw0LrRgNGL0YLQuNC1INC00LvRjyDQutCw0YDRgtC+0YfQtdC6XG5wb3B1cENhcmRzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgIGlmKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9jYXJkcycpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2VfY2FyZHNfaXRlbScpKXtcbiAgICAgICAgdmFsaWRhdGVDYXJkLnJlbW92ZUVycm9yKHBvcHVwTmFtZUNhcmRzLCBpbnB1dE5hbWVFcnJvcik7XG4gICAgICAgIHZhbGlkYXRlQ2FyZC5yZW1vdmVFcnJvcihwb3B1cEpvYkNhcmRzLCBpbnB1dEVycm9yVXJsKTtcbiAgICAgICAgZm9ybVBvcHVwLmNsb3NlKCk7XG4gICAgfVxufSk7XG5cbi8vINC30LDQutGA0YvRgtC40LUg0LTQu9GPINGE0L7RgtC+XG5waG90b0NhcmRzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgIGlmKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwaG90bycpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwaG90b19fY2xvc2UnKSl7XG4gICAgICAgIGNhcmRzSW1hZ2UuY2xvc2UoKTtcbiAgICB9XG59KVxuXG4vLyDRhNGD0L3QutGG0LjRjyDRgdC+0LfQtNCw0L3QuNGPINC+0LTQvdC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgcmVuZGVyZXIgPSAoaXRlbSkgPT4ge1xuICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe2l0ZW0sIFxuICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICBjYXJkc0ltYWdlLm9wZW4oaXRlbS5uYW1lLCBpdGVtLmxpbmspO1xuICAgIH0gICBcbiAgICB9LCAnI2NhcmRzX190ZW1wbGF0ZScpO1xuICAgIGNvbnN0IGNhcmRzRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gICAgY2FyZHNEb25lLmFkZEl0ZW0oY2FyZHNFbGVtZW50KTtcbn1cblxuLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LXQuiDQuNC3INC/0L7Qv9Cw0L9cbmNvbnN0IGZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcjY2FyZHNfX3BvcHVwJywgKGl0ZW0pID0+IHtyZW5kZXJlcihpdGVtKTt9KTtcblxuLy8g0J/RgNC40LHQu9C40LbQtdC90LjQtSDQutCw0YDRgtC40L3QutC4XG5jb25zdCBjYXJkc0ltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucGhvdG8nKTtcblxuLy8g0JTQu9GPINC60LDRgNGC0L7Rh9C10Log0LjQtyDQvNCw0YHRgdC40LLQsFxuY29uc3QgY2FyZHNEb25lID0gbmV3IFNlY3Rpb24oeyBpdGVtczogaW5pdGlhbENhcmRzLCByZW5kZXJlcn0sICcuY2FyZHMnKTtcbmNhcmRzRG9uZS5yZW5kZXJFbGVtZW50KGluaXRpYWxDYXJkcyk7XG5cbm9wZW5CdXR0b25Qb3B1cEFkZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFBvcHVwQ2FyZHMpO1xub3BlbkJ1dHRvblBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkUG9wdXApO1xuXG5jb25zdCB2YWxpZGF0ZUVkaXQgPSBuZXcgRm9ybVZhbGlkYXRvcihhbGxDbGFzZXNDYXNlLmZvcm1TZWxlY3RvciwgYWxsQ2xhc2VzQ2FzZSk7XG52YWxpZGF0ZUVkaXQuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCB2YWxpZGF0ZUNhcmQgPSBuZXcgRm9ybVZhbGlkYXRvcihhbGxDbGFzZXNDYXNlLmZvcm1TZWxlY3RvckNhcmRzLCBhbGxDbGFzZXNDYXNlKTtcbnZhbGlkYXRlQ2FyZC5lbmFibGVWYWxpZGF0aW9uKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==